# Effortless - Smart Rewards Platform

A modern banking-style portal with AI-powered rewards and savings insights, similar to Bank of America's online banking experience.

## Features

- **Dashboard**: Account summary, transaction history, and savings overview
- **Smart Rewards**: AI-powered reward matching and recommendations
- **Auto-Apply Rewards**: Automatically apply eligible rewards to transactions
- **Priceless Experiences**: Location-based premium experiences and notifications
- **AI Insights**: Natural language summaries and personalized recommendations
- **Settings**: Configure geo-location, notifications, and auto-apply preferences

## Project Structure

```
EffortlessSmartRewards/
├── backend/              # FastAPI backend
│   ├── app/
│   │   ├── __init__.py
│   │   ├── main.py      # API endpoints
│   │   ├── models.py    # Database models
│   │   ├── schemas.py   # Pydantic schemas
│   │   ├── database.py  # Database configuration
│   │   ├── services.py  # Business logic
│   │   └── ai_service.py # OpenAI integration
│   ├── requirements.txt
│   ├── seed_data.py     # Sample data generator
│   └── .env.example
├── frontend/            # React frontend
│   ├── src/
│   │   ├── components/  # Reusable components
│   │   ├── pages/       # Page components
│   │   ├── App.jsx
│   │   └── main.jsx
│   ├── package.json
│   └── vite.config.js
└── README.md
```

## Setup Instructions

### Prerequisites

- Python 3.9+
- Node.js 18+
- OpenAI API key

### Backend Setup

1. Navigate to the backend directory:
   ```bash
   cd backend
   ```

2. Create a virtual environment:
   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```

3. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

4. Set up environment variables:
   ```bash
   cp .env.example .env
   ```
   
   Edit `.env` and add your OpenAI API key:
   ```
   OPENAI_API_KEY=your_openai_api_key_here
   DATABASE_URL=sqlite:///./effortless.db
   ```

5. Initialize the database and seed sample data:
   ```bash
   python seed_data.py
   ```

6. Start the backend server:
   ```bash
   uvicorn app.main:app --reload
   ```

   The API will be available at `http://localhost:8000`

### Frontend Setup

1. Navigate to the frontend directory:
   ```bash
   cd frontend
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

3. Start the development server:
   ```bash
   npm run dev
   ```

   The frontend will be available at `http://localhost:3000`

## Data Models

### Transaction History Schema

The transaction data follows this schema (as documented in the code):

- **Date Time Fields**: Posted (by FI) and Transaction date/time fields available.
- **Customer ID**: A number generated by MA Open Banking that uniquely identifies a customer.
- **Account ID**: A number generated by MA Open Banking that uniquely identifies a customer's account: checking, savings, etc.
- **Description + Memo**: Two free text fields, often concatenated by data science, that offer information on merchant, payment processor, geographic location, and transaction type (P2P, P2M, Income, etc).
- **Value Amount**: In USD.

### Database Tables

- `users`: User profiles linked to customer_id from Open Finance feed
- `user_preferences`: Notification and geo-location preferences
- `transactions`: Transaction history with enrichment fields
- `rewards`: Merchant offers and Priceless experiences

## API Endpoints

### User Endpoints
- `GET /users/{user_id}` - Get user profile
- `GET /users/{user_id}/preferences` - Get user preferences
- `PUT /users/{user_id}/preferences` - Update user preferences

### Transaction Endpoints
- `GET /users/{user_id}/transactions` - Get user transactions

### Rewards Endpoints
- `GET /rewards` - Get available rewards

### Dashboard Endpoints
- `GET /users/{user_id}/dashboard-summary` - Get dashboard data
- `GET /users/{user_id}/ai-insights` - Get AI-generated insights

## AI Agent Integration

The AI agent (using OpenAI) provides:

1. **Natural Language Summaries**: Monthly spending and savings summaries
2. **Reward Recommendations**: Personalized auto-apply and Priceless experience suggestions
3. **Notification Decisioning**: Determines when to send Priceless experience notifications

### Configuration

Set the `OPENAI_API_KEY` environment variable in the backend `.env` file. The AI service uses GPT-4 by default (configurable in `app/ai_service.py`).

## Open Finance Integration

The application is designed to integrate with Open Finance transaction feeds. The transaction enrichment service (`app/services.py`) processes raw transaction data and:

- Normalizes merchant names from Description + Memo fields
- Infers categories (dining, travel, groceries, etc.)
- Optionally infers geo-location

To integrate with a real Open Finance feed:

1. Replace the seed data with actual transaction imports
2. Update the `TransactionEnrichmentService` with your specific merchant normalization patterns
3. Configure the customer_id mapping to match your user system

## Sample Data

The seed script creates:
- 2 sample users (Sarah Johnson, Michael Chen)
- 7 sample rewards (cashback and Priceless experiences)
- 60-90 sample transactions per user over the last 30 days

## Development Notes

- **Mock Authentication**: The frontend uses a hardcoded `MOCK_USER_ID = 1`. Replace with proper authentication in production.
- **Database**: Uses SQLite by default. For production, update `DATABASE_URL` to PostgreSQL or another database.
- **CORS**: Configured for local development. Update CORS settings in `app/main.py` for production.

## License

MIT
